%class-name Parser

%filenames parser
%parsefun-source parse.cc
%scanner ../scanner/scanner.h
%print                      d_scanner.match()
%scanner-token-function     d_scanner.lex()
%debug

%baseclass-preinclude preinclude.h

%stype spSemVal


// definition section
%token  EXCL_START_CONDITION
        INCL_START_CONDITION
        NAME
        SECTION_DELIMITER

// options
%token  BASECLASSHEADER
        CLASSHEADER
        CLASSNAME
        DEBUG
        DEBUG_STEPS
        IMPLEMENTATIONHEADER
        INPUTIMPLEMENTATION
        INPUTINTERFACE
        INTERACTIVE
        LEXFUNCTIONNAME
        LEXSOURCE
        NAMESPACE
        NOLINES
        OPTION_DIRECTIVE
        SKELETON_DIRECTORY

// rulessection
%token  BLOCK

// pattern
%token  WS

// character classes
%token  PREDEFINED_CLASS

// Operators:
//  lowest precedence

// precedence inside character classes:

// operators in pattern: 
//                      
%nonassoc   '/'
%left       '|'
%left       CHARACTER '.' DECIMAL CC_NEGATED CC_START ESCAPE_SEQUENCE STRING 
            EOF_PATTERN
%left CC_PLUS CC_MINUS
%right      '*' '+' '?' '{' '('

//  highest precedence

%%

input:
    opt_directives          // directives. C(++) code now in a class
    section_delimiter mode_pattern
    opt_rules
;

section_delimiter:
    SECTION_DELIMITER
    {
        sectionDelimiter();
    }
;

%include rules/messages                 
%include rules/modeswitches             

%include rules/plaincharacters          
%include rules/characterclass

%include    rules/patterncontext
%include    rules/optws
%include    rules/quantifier
%include    rules/decimal
%include    rules/interval
%include    rules/incparen
%include    rules/decparen
%include    rules/patternws
%include rules/pattern

%include rules/option                   
%include rules/directives               

%include rules/rulessection             
